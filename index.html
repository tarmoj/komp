<!DOCTYPE html>
<!--player lehelt: https://github.com/surikov/webaudiofont  -->
<html>
  <head>
    <title>Muusikaharjutused</title>
    <meta content="">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1" />
    <style></style>
    
    <script src="https://unpkg.com/vextab/releases/vextab-div.js"></script>    
    <script src='https://surikov.github.io/webaudiofont/npm/dist/WebAudioFontPlayer.js'></script>
    <script src='https://surikov.github.io/webaudiofontdata/sound/0000_JCLive_sf2_file.js'> </script>
	<script src="baseclass.js"></script>
	<script src="find_missing_duration.js"></script>
	<script src="name_duration.js"></script>
    <script src="describe_note.js"></script>
    <script src="recognize_key_signature.js"></script>
    <script>
    
	var exercise; 
	
    
    // different exercises are defined as different functions in separate .js files



    // TODO: create a hash of ecercsise names and numbers to link them to from URL
    //var exercises = [  ]
    
	window.onload = function() {
		
		// get GET parameter to load specific expikaercise set in URL
		// the link van be set as ?e=<exercise number> like e=1.2.3 The 'e' actually does not matter
		var searchString = window.location.search;
		if (searchString.length>0) {
			var parameters = searchString.split("&"); // remove ?
			var exerciseNumber = parameters[0].split("=")[1];
			console.log("you want to open exercise", exerciseNumber)
			switch (exerciseNumber) {
				case "1.2.2" : nameDuration(); break;
				case "1.2.3" : findMissingDuration(); break;
				case "1.8.1" : recognizeKeySignature(); break;
				default: console.log("Exercise "+exerciseNumber+" is unkonwn or not defined yet");
			}
			
		} else {		
 			exercise = new MusicExercise("mainCanvas") ;
 			exercise.draw(); // dummy exercise -  just show empty staff
			//recognizeKeySignature(); 
		}
	}


    
    </script>

    </head>
    
	<body>
	<a onclick="findMissingDuration()" href="#">Leia puuduv vältus</a> 
	<a onclick="nameDuration()" href="#">Määra helivältus</a> 
	<a onclick="describeNote()" href="#">Kirjelda helikõrguse asukohta</a>
	<a onclick="recognizeKeySignature()" href="#">Määra helistik</a>
	jne
	<hr>
	<br>
	<h1 id="title">MUUSIKA KOMPOSITSIOONIÕPETUS. Harjutused</h1>
	<h2 id="exerciseTitle">Harjutuse nimi</h2>
	<br>
	<p id="description">Ülesande kirjeldus.</p>
	<br>
	<button id="playButton" onclick="exercise.play();">Mängi</button><br>
	<!-- for CANVAS backend: <canvas id="mainCanvas"></canvas>-->
	<div id="mainCanvas"></div>
	<br>
	<button id = "renewButton" onclick='console.log("Set the actions in your exercise definition.")'>Uuenda</button><br>
	<br>
	<span id="question">Küsimus</span>
	
	<span id="responseDiv">	
	</span>
	<button id="replyButton" onclick="exercise.checkResponse()">Vasta</button>
	
	<p id="feedback"></p>
	Katseid: <label id="attempts">0</label>. Neist õigeid vastuseid: <label id="score">0</label> 
	<button id="resetButton" onclick='exercise.attempts=0;exercise.score=0;attempts.innerHTML="0"; score.innerHTML = "0" '>Nulli</button>
	<br>
	

	</body>
</html>
