<!DOCTYPE html>
<!--player lehelt: https://github.com/surikov/webaudiofont  -->
<html>
  <head>
    <title>Muusikaharjutused</title>
    <meta content="">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1" />
    <style></style>
    
    <!--dependencies-->
    <script src="https://unpkg.com/vextab/releases/vextab-div.js"></script>    
    <script src='https://surikov.github.io/webaudiofont/npm/dist/WebAudioFontPlayer.js'></script>
    <script src='https://surikov.github.io/webaudiofontdata/sound/0000_JCLive_sf2_file.js'> </script>
	
	<!--common classes or data-->
	<script src="baseclass.js"></script>
	<script src="pianoclass.js"></script>
	<script src="possible_notes.js"></script>
	<script src="interval_class.js"></script>
<!--	<script src="possible_intervals.js"></script>-->
	
	<!--exercises-->
	<script src="recognize_duration.js"></script>
	<script src="find_missing_duration.js"></script>
	<script src="name_duration.js"></script>
    <script src="draw_barlines.js"></script>
    <script src="find_time.js"></script>
    

    
    <script src="describe_note.js"></script>    
    <script src="note_from_notename.js"></script>
    <script src="note_from_notation.js"></script>
    <script src="note_from_keyboard.js"></script>
    <script src="note_from_syllable.js"></script>
	<script src="enharmonism.js"></script>
	
    <script src="build_interval.js"></script>
    <script src="build_chord.js"></script>
	
	<script src="recognize_key_signature.js"></script>
	<script src="build_scale.js"></script>
	<script src="name_key.js"></script>
    
    
    <!--main-->
    <script>
    
	var exercise; 
	
    
    // different exercises are defined as different functions in separate .js files

    
	window.onload = function() {
		
		// get GET parameter to load specific expikaercise set in URL
		// the link van be set as ?e=<exercise number> like e=1.2.3 The 'e' actually does not matter
		var searchString = window.location.search;
		if (searchString.length>0) {
			var parameters = searchString.split("&"); // remove ?
			var exerciseNumber = parameters[0].split("=")[1];
			console.log("you want to open exercise", exerciseNumber)
			switch (exerciseNumber) {
				case "1.2.2" : nameDuration(); break;
				case "1.2.3" : findMissingDuration(); break;
				case "1.2.4" : drawBarlines(); break;
				case "1.3.5" : describeNote(); break;
				case "1.3.7" : noteFromNoteName(); break;
				case "1.8.1" : recognizeKeySignature(); break;
				default: console.log("Exercise "+exerciseNumber+" is unkonwn or not defined yet");
			}
			
		} else {		
  			exercise = new MusicExercise(document.body, "mainCanvas") ;
  			exercise.draw(); // dummy exercise -  just show empty staff
  			

		}
	}
	
    
    </script>

    </head>
    
	<body>
	
	<h1 id="title">MUUSIKA KOMPOSITSIOONIÕPETUS. Harjutused</h1>
	<h2>Sisukord</h2>
	<h3>Helivältus</h3>
	<a onclick="exercise = recognizeDuration()" href="#start">Vali õige helivältus</a><br>
	<a onclick="exercise = findMissingDuration()" href="#start">Leia puuduv vältus</a><br> 
	<a onclick="exercise =  nameDuration()" href="#start">Määra helivältus</a> <br>
	<a onclick="exercise = drawBarlines()" href="#start">Lisa taktijoon</a> <br>
	<a onclick="exercise = findTime()" href="#start">Määra taktimõõt</a> <br>
		
	<h3>Helikõrgus</h3>
	<a onclick='exercise = describeNote("treble")' href="#start">Kirjelda helikõrguse asukohta: viiulivõti</a> <br>
	<a onclick='exercise = describeNote("bass")' href="#start">Kirjelda helikõrguse asukohta: bassivõti</a> <br>
	<a onclick='exercise =  noteFromNoteName("treble")' href="#start">Kirjuta helikõrgus tähtnime järgi: viiulivõti</a> <br>
	<a onclick='exercise =  noteFromNoteName("bass")' href="#start">Kirjuta helikõrgus tähtnime järgi : bassivõti</a> <br>
	<a onclick='exercise = noteFromSyllable("treble")' href="#start">Kirjuta helikõrgus silpnime järgi: viiulivõti</a> <br>
	<a onclick='exercise = noteFromSyllable("bass")' href="#start">Kirjuta helikõrgus silpnime järgi: bassivõti</a> <br>
	<a onclick='exercise = noteFromNotation("treble")' href="#start">Mis noot see on? Viiulivõti</a> <br>
	<a onclick='exercise = noteFromNotation("bass")' href="#start">Mis noot see on? Bassivõti</a> <br>
	<a onclick='exercise = noteFromKeyboard("treble")' href="#start">Mis klahv see on? Viiulivõti</a> <br>
	<a onclick='exercise = noteFromKeyboard("bass")' href="#start">Mis klahv see on? Bassivõti</a> <br>
	
	<a onclick='exercise = enharmonism("name")' href="#start">Leia enharmooniliselt vastav noot tähtnimetuse järgi.</a> <br>
	<a onclick='exercise = enharmonism("syllable")' href="#start">Leia enharmooniliselt vastav noot silpminetuse järgi.</a> <br>
	
	<h3>Akord</h3>
	<a onclick='exercise = buildInterval("treble", "up")' href="#start">Ehita intervall üles. Viiulivõti. </a> <br>
	<a onclick='exercise = buildInterval("treble", "down")' href="#start">Ehita intervall alla. Viiulivõti. </a> <br>
	<a onclick='exercise = buildInterval("bass", "up")' href="#start">Ehita intervall üles. Bassivõti. </a> <br>
	<a onclick='exercise = buildInterval("bass", "down")' href="#start">Ehita intervall alla. Bassivõti. </a> <br>
	<br>
	<a onclick='exercise = buildChord("treble", "up")' href="#start">Ehita akord üles. Viiulivõti. </a> <br>
	<a onclick='exercise = buildChord("treble", "down")' href="#start">Ehita akord alla. Viiulivõti. </a> <br>
	<a onclick='exercise = buildChord("bass", "up")' href="#start">Ehita akord üles. Bassivõti. </a> <br>
	<a onclick='exercise = buildChord("bass", "down")' href="#start">Ehita akord alla. Bassivõti. </a> <br>
	
	<h3>Harmoonia</h3>
	<a onclick="exercise = recognizeKeySignature()" href="#start">Määra helistik</a> <br>
	<a onclick="exercise = buildScale()" href="#start">Ehita helirida antud noodist üles</a> <br>
	<a onclick='exercise = nameKey("major")' href="#start">Kirjuta duur-helirea nimetus</a> <br>
	<a onclick='exercise = nameKey("minor")' href="#start">Kirjuta moll-helirea nimetus</a> <br>
	
	
	<hr>
	<br>
	<div id="exercise1">
	<h1 id="title" class="title"><a name="start">MUUSIKA KOMPOSITSIOONIÕPETUS. Harjutused</a></h1>
	<h2 id="exerciseTitle" class="exerciseTitle">Harjutuse nimi</h2>
	<br>
	<p id="description" class="description">Ülesande kirjeldus.</p>
	<br>
	<button id="playButton" class="playButton" onclick="exercise.play();">Mängi</button>
	<!-- for CANVAS backend: <canvas id="mainCanvas"></canvas>-->
	<div id="mainCanvas" class="mainCanvas"></div>
	<br>
	<button id = "renewButton" class="renewButton" onclick='exercise.renew()'>Uuenda</button><br>
	<br>
	<span id="question" class="question">Küsimus</span>
	
	<span id="responseDiv" class="responseDiv">	
	</span>
	<button id="replyButton" class="replyButton" onclick="exercise.checkResponse()">Vasta</button>
	
	<p id="feedback" class="feedback"></p>
	Katseid: <label id="attempts" class="attempts">0</label>. Neist õigeid vastuseid: <label id="score" class="score">0</label> 
	<button id="resetButton" class="resetButton" onclick='exercise.attempts=0;exercise.score=0;attempts.innerHTML="0"; score.innerHTML = "0" '>Nulli</button>
	<br>
	<br>
	Kui tunned, et oled valmis <b>testi sooritama</b>, vajuta: <button id="showTestButton"  class="showTestButton" onclick='testDiv.style.visibility="visible";'> Test</button> <br>
	
	<div id="testDiv" class="testDiv" style="visibility:hidden">
	Küsimus nr <b><label id="questionNumber" class="questionNumber" >0</label></b>. Aega on: <b><label id="timer" class="timer">0</label></b> sekundit.
	<button id="startTest" class="startTest" onclick="exercise.startTest()">Alusta</button>
	<button id="stopTest" class="stopTest" onclick="exercise.stopTest()">Peata</button>
	<br>
	<p><small>
	Teile esitatkse 5 küsimust, mis tuleb ettemääratud aja jooksul vastata. Kui jõuate varem valmis, vajutage lihtsalt "Vasta". Uus küsimus kuvatakse peale eelmise vastamist või aja täitumisel.
	</small></p>
	
	</div>
	</div>
	
	</body>
</html>
